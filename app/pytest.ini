[pytest]
testpaths = tests
asyncio_mode = auto
log_cli = false
log_cli_level = WARNING
log_level = WARNING
markers =
    unit: Pure unit tests with no external dependencies
    integration: Integration tests combining multiple components
    legacy: Legacy test structure maintained for transition period
env =
    SLACK_ENABLED = false
    SLACK_TOKEN = xoxb-test-token-for-tests
    SLACK_BOT_TOKEN = xoxb-test-token-for-tests
    SLACK_APP_TOKEN = xapp-test-token
    SLACK_SIGNING_SECRET = test-signing-secret
    APP_TOKEN = "APP_TOKEN"
    SRE_DRIVE_ID = "SRE_DRIVE_ID"
    SRE_INCIDENT_FOLDER = "SRE_INCIDENT_FOLDER"
    INCIDENT_TEMPLATE = "INCIDENT_TEMPLATE"
    INCIDENT_LIST = "INCIDENT_LIST"
    PICKLE_STRING = "PICKLE_STRING"
    SENTINEL_CUSTOMER_ID = "SENTINEL_CUSTOMER_ID"
    SENTINEL_LOG_TYPE = "SENTINEL_LOG_TYPE"
    SENTINEL_SHARED_KEY = "SENTINEL_SHARED_KEY"
    SLACK_SECURITY_USER_GROUP_ID = "SLACK_SECURITY_USER_GROUP_ID"
    INCIDENT_HANDBOOK_URL = "INCIDENT_HANDBOOK_URL"
    AWS_ORG_ACCOUNT_ROLE_ARN = "AWS_ORG_ACCOUNT_ROLE_ARN"
    AWS_LOGGING_ACCOUNT_ROLE_ARN = "AWS_LOGGING_ACCOUNT_ROLE_ARN"
    AWS_AUDIT_ACCOUNT_ROLE_ARN = "AWS_AUDIT_ACCOUNT_ROLE_ARN"
    ATIP_ANNOUNCE_CHANNEL = "ATIP_ANNOUNCE_CHANNEL"
    TRELLO_APP_KEY = "TRELLO_APP_KEY"
    TRELLO_TOKEN = "TRELLO_TOKEN"
    TRELLO_ATIP_BOARD = "TRELLO_ATIP_BOARD"
    GCP_SRE_SERVICE_ACCOUNT_KEY_FILE = "GCP_SRE_SERVICE_ACCOUNT_KEY_FILE"
    SLACK__SLACK_TOKEN = xoxb-test-token-for-tests
    SLACK__APP_TOKEN = xapp-test-token
    AWS__AWS_REGION = us-east-1
    SENTINEL__SENTINEL_CUSTOMER_ID = "SENTINEL_CUSTOMER_ID"
    SENTINEL__SENTINEL_LOG_TYPE = "SENTINEL_LOG_TYPE"
    SENTINEL__SENTINEL_SHARED_KEY = "SENTINEL_SHARED_KEY"
    SLACK__SLACK_SECURITY_USER_GROUP_ID = "SLACK_SECURITY_USER_GROUP_ID"
    AWS__ORG_ROLE_ARN = "AWS_ORG_ACCOUNT_ROLE_ARN"
    AWS__LOGGING_ROLE_ARN = "AWS_LOGGING_ACCOUNT_ROLE_ARN"
    AWS__AUDIT_ROLE_ARN = "AWS_AUDIT_ACCOUNT_ROLE_ARN"
    ATIP__ATIP_ANNOUNCE_CHANNEL = "ATIP_ANNOUNCE_CHANNEL"
    TRELLO__TRELLO_APP_KEY = "TRELLO_APP_KEY"
    TRELLO__TRELLO_TOKEN = "TRELLO_TOKEN"
    TRELLO__TRELLO_ATIP_BOARD = "TRELLO_ATIP_BOARD"
    GOOGLE_WORKSPACE__GCP_SRE_SERVICE_ACCOUNT_KEY_FILE = "GCP_SRE_SERVICE_ACCOUNT_KEY_FILE"
    
# Prevent pytest from recursing into smoke tests directory by default.
# Smoke tests often require credentials and should be run explicitly.
norecursedirs = tests/smoke
filterwarnings =
    ignore::DeprecationWarning:pydantic._internal._config

